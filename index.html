<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
    }
    button {
      width: 100px;
      height: 30px;
      margin: 10px;
    }
    #timer-info {
      display: none;
    }
  </style>
  <title>Invisible Random Timer</title>
</head>
<body>

  <button id="startBtn" onclick="startTimer()">Start</button>
  <button id="showBtn" onclick="showTime()" disabled>Show</button>
  <button id="resetBtn" onclick="resetTimer()" disabled>Reset</button>

  <div id="timer-info">
    <p id="timeSet">Time Set: </p>
    <p id="timePassed">Time Passed: </p>
  </div>
  <audio id="audio" src="drum.mp3"></audio>

  <script>
    let timer;
    let startTime;
    let endTime;

    function startTimer() {
      const randomTime = getRandomTime(100, 100);
      startTime = new Date().getTime();
      endTime = startTime + randomTime;

      document.getElementById('timeSet').textContent = `Time Set: ${formatTime(randomTime)}`;
      document.getElementById('timer-info').style.display = 'none'; // Hide initially

      document.getElementById('startBtn').style.backgroundColor = '#8BC34A'; // Change color to green

      document.getElementById('showBtn').disabled = false;
      document.getElementById('resetBtn').disabled = false;

      updateRealTime();
    }

    function showTime() {
      clearInterval(timer);
      document.getElementById('timer-info').style.display = 'block'; // Show after clicking "Show" button
      updateElapsedTime(); // Update elapsed time immediately

      // Continue updating elapsed time in real-time
      timer = setInterval(updateElapsedTime, 1000);
    }

    function resetTimer() {
      clearInterval(timer);
      document.getElementById('timer-info').style.display = 'none';

      document.getElementById('startBtn').style.backgroundColor = ''; // Reset color

      document.getElementById('showBtn').disabled = true;
      document.getElementById('resetBtn').disabled = true;
    }

    function updateRealTime() {
      timer = setInterval(updateElapsedTime, 1000);
    }

    function updateElapsedTime() {
      const elapsedTime = getElapsedTime();
      document.getElementById('timePassed').textContent = `Time Passed: ${formatTime(elapsedTime)}`;

      if (elapsedTime >= endTime - startTime) {
        playAudio(); // Play audio when the timer is up
        // Stop updating elapsed time and audio playback
        clearInterval(timer);
      }
    }

    function getElapsedTime() {
      return Math.floor((new Date().getTime() - startTime) / 1000);
    }

    function playAudio() {
      const audio = document.getElementById('audio');
      audio.play();
    }

    function getRandomTime(min, max) {
      return Math.floor(60 * Math.random() * (max - min) + 60 * min);
    }

    function formatTime(totalSeconds) {
      const minutes = Math.floor(totalSeconds / 60);
      const seconds = totalSeconds % 60;
      return `${minutes}min ${seconds}sec`;
    }
  </script>

</body>
</html>
